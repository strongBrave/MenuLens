# ═══════════════════════════════════════════════════════════════════
# MenuLens Backend 环境变量配置
# ═══════════════════════════════════════════════════════════════════
# 复制此文件为 .env 并填入实际的 API Keys
# cp .env.example .env

# =============================================================================
# 🔑 API Keys (必需)
# =============================================================================

# Google Gemini API (用于 OCR 菜品识别、翻译、逻辑处理)
# 获取方式: https://aistudio.google.com/app/apikey
LLM_API_KEY=""

# SerpAPI Key (用于搜索菜品图片，推荐)
# 获取方式: https://serpapi.com/
SERPAPI_KEY=""

# 或使用 Google Custom Search API (SerpAPI 的替代方案)
# 获取方式: https://developers.google.com/custom-search/v3/overview
# SEARCH_API_KEY=""
# SEARCH_ENGINE_ID=""

# =============================================================================
# 🤖 LLM 模型配置
# =============================================================================

# LLM API 基础地址 (支持 OpenAI 兼容格式)
LLM_BASE_URL="https://www.dmxapi.cn/v1"

# 使用的模型名称
LLM_MODEL="gemini-2.5-flash-lite"

# LLM 请求超时时间 (秒)
LLM_TIMEOUT=30

# LLM 温度参数 (0.0-1.0，越高越有创意)
LLM_TEMPERATURE=0.2

# =============================================================================
# 🔍 搜索服务配置
# =============================================================================

# 搜索服务提供商: "serpapi"
SEARCH_PROVIDER="serpapi"

# SerpAPI 搜索引擎 (默认 Google)
SERPAPI_ENGINE="google"

# Google Custom Search 配置 (当 SEARCH_PROVIDER="google" 时使用)
# SEARCH_API_KEY=""
# SEARCH_ENGINE_ID=""

# 搜索超时时间 (秒)
SEARCH_TIMEOUT=60

# 每个菜品返回的图片数量
SEARCH_NUM_RESULTS=1

# 最大并发搜索数 (影响图片加载速度)
MAX_CONCURRENT_SEARCHES=5

# 搜索候选结果数量 (用于图片验证筛选)
SEARCH_CANDIDATE_RESULTS=5

# =============================================================================
# 🖼️ RAG Pipeline 配置 (AI 图片验证)
# =============================================================================

# 是否启用 RAG Pipeline (获取菜品图片)
ENABLE_RAG_PIPELINE=true

# 图片验证分数阈值 (0.0-1.0，低于此值的图片将被过滤)
IMAGE_VERIFY_SCORE_THRESHOLD=0.7

# 是否启用 AI 生图 (实验性功能)
ENABLE_IMAGE_GENERATION=false

# 图片 URL 可访问性检查超时 (秒)
IMAGE_URL_CHECK_TIMEOUT=5

# AI 图片验证超时 (秒)
IMAGE_VERIFY_TIMEOUT=30

# 生成服务配置 (当 ENABLE_IMAGE_GENERATION=true 时使用)
# GENERATION_API_URL="https://www.dmxapi.cn/v1"
# GENERATION_API_KEY=""
# GENERATION_MODEL=""

# =============================================================================
# 🌐 服务器配置
# =============================================================================

BACKEND_HOST=0.0.0.0
BACKEND_PORT=8000

# CORS 允许的源地址 (前端开发服务器地址)
CORS_ORIGIN=http://localhost:5173

# =============================================================================
# 📁 文件上传配置
# =============================================================================

# 最大上传文件大小 (MB)
MAX_FILE_SIZE_MB=10

# =============================================================================
# 🔧 高级配置 (可选)
# =============================================================================

# HTTP 代理地址 (用于需要代理访问 API 的环境)
# PROXY_URL="http://127.0.0.1:7897"

# 启动时验证配置 (生产环境建议设为 true)
VALIDATE_SETTINGS=false
